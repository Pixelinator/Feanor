{{- if not (lookup "v1" "ConfigMap" .Release.Namespace (printf "%s-%s" (include "home-assistant.fullname" .) "config")) }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "home-assistant.fullname" . }}-config
  labels:
    {{- include "home-assistant.labels" . | nindent 4 }}
data:
  configuration.yaml: |
    http:
      use_x_forwarded_for: true
      trusted_proxies:
        - 10.42.0.0/16
        - 10.43.0.0/16
        - 127.0.0.1
        - ::1

    default_config:
{{- end }}